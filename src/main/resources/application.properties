spring.application.name=fablab

server.address=localhost
server.port=8081

spring.datasource.url=jdbc:mysql://localhost:3307/fablabdb?useUnicode=true&characterEncoding=UTF-8&serverTimezone=UTC&useSSL=false&allowPublicKeyRetrieval=true
spring.datasource.username=admin
spring.datasource.password=admin
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# Forzar codificación en la conexión JDBC y asegurar que el cliente use UTF-8 (utf8mb4)
# HikariCP ejecutará este SQL al abrir conexiones
spring.datasource.hikari.connection-init-sql=SET NAMES utf8mb4

## Evitar que Hibernate intente crear/alterar tablas automáticamente
## (previene errores si la base de datos ya tiene esquemas incompatibles)
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
spring.jpa.hibernate.naming.implicit-strategy=org.hibernate.boot.model.naming.ImplicitNamingStrategyLegacyJpaImpl

# Reduce Hibernate logging verbosity
logging.level.org.hibernate=ERROR

# Desactivar logs SQL y valores bind de Hibernate
logging.level.org.hibernate.SQL=OFF
logging.level.org.hibernate.type.descriptor.sql=OFF
logging.level.org.hibernate.tool.hbm2ddl=ERROR

# Configuracion explicita Thymeleaf
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html
spring.thymeleaf.cache=false
spring.thymeleaf.enabled=true
spring.thymeleaf.encoding=UTF-8

# Forzar codificación UTF-8 en peticiones/respuestas HTTP
server.servlet.encoding.charset=UTF-8
server.servlet.encoding.force=true
server.servlet.encoding.enabled=true

# Clave secreta para firmar cookie de "recordar sesión"
auth.remember.secret=fablab_secret_key

# Límite de subida de ficheros (permitir hasta 2 MB por archivo)
spring.servlet.multipart.max-file-size=2MB
spring.servlet.multipart.max-request-size=2MB

# Configuración de LangChain4j para OpenRouter
langchain4j.open-ai.chat-model.base-url=https://openrouter.ai/api/v1
langchain4j.open-ai.chat-model.api-key=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
langchain4j.open-ai.chat-model.model-name=mistralai/devstral-2512:free
langchain4j.open-ai.chat-model.log-requests=true
langchain4j.open-ai.chat-model.log-responses=true

# Google Gemini API Key
google.gemini.api-key=YOUR_GOOGLE_GEMINI_API_KEY_HERE
